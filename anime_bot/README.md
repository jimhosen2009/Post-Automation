
# 🎌 Anime News Bot - Modular Version

A modular anime news bot with multi-AI engine support, restructured for easy maintenance and modification.

## 📁 Project Structure

```
anime_bot/
├── config.py                    # All configuration and API keys
├── main.py                      # Main entry point
├── models/
│   ├── __init__.py
│   └── database.py             # NewsDatabase class
├── services/
│   ├── __init__.py
│   ├── news_collector.py       # RSS feed collection
│   ├── content_filter.py       # Article filtering & ranking
│   ├── post_generator.py       # Facebook post generation
│   └── facebook_poster.py      # Facebook API integration
├── ai/
│   ├── __init__.py
│   ├── model_config.py         # AI model definitions
│   ├── health_tracker.py       # ModelHealthTracker class
│   ├── ai_client.py            # MultiAIClient class
│   └── api.py                  # Simple wrapper functions
└── utils/
    ├── __init__.py
    └── text_utils.py           # HTML cleaning, validation
```

## 🚀 Quick Start

1. **Configure API Keys** in `config.py`:
   ```python
   OPENROUTER_API_KEY = "your_openrouter_key"
   GEMINI_API_KEY = "your_gemini_key"  # Optional backup
   FACEBOOK_PAGE_TOKEN = "your_facebook_token"
   ```

2. **Install Dependencies**:
   ```bash
   pip install openai requests feedparser
   ```

3. **Run the Bot**:
   ```bash
   python -m anime_bot.main
   ```

## 🔧 Key Features

### Modular Architecture
- **Single Responsibility**: Each file has one clear purpose
- **Loose Coupling**: Modules depend on interfaces, not implementations
- **High Cohesion**: Related functions grouped together
- **Easy Navigation**: Find any feature by its logical location

### Multi-AI Engine
- **Health Monitoring**: Tests all models at startup
- **Intelligent Fallback**: Automatically tries next model if one fails
- **Performance Tracking**: Tracks success rates and response times
- **Task-Specific Selection**: Chooses best model for each task type

### Services
- **News Collection**: RSS feed parsing and article extraction
- **Content Filtering**: AI-powered anime relevance checking
- **Post Generation**: Two-stage AI process (analysis + generation)
- **Social Media**: Facebook Graph API integration

## 📊 Usage Examples

### Using Individual Services
```python
from anime_bot.services.news_collector import collect_anime_news
from anime_bot.services.content_filter import filter_and_rank
from anime_bot.ai.api import generate_text

# Collect news
articles = collect_anime_news()

# Filter with AI
filtered = filter_and_rank(articles, db)

# Generate text with AI
text, model = generate_text("Write a post about anime", "creative_writing")
```

### Using AI Engine Standalone
```python
from anime_bot.ai.api import initialize_ai_system, generate_text

# Initialize AI system
if initialize_ai_system():
    # Generate text with automatic model selection
    result, model_used = generate_text("Your prompt here")
    print(f"Generated by {model_used}: {result}")
```

## 🛠️ Configuration

All settings are centralized in `config.py`:

- **API Keys**: OpenRouter, Gemini, Facebook
- **News Sources**: RSS feed URLs
- **Quality Settings**: Minimum scores, max posts per day
- **AI Settings**: Temperature, max tokens, retry limits
- **Timing**: Delays between posts and health checks

## 🔄 Migration from Monolithic Version

The modular version maintains 100% compatibility with the original functionality:

- ✅ All emoji and comments preserved
- ✅ Function signatures unchanged
- ✅ No logic changes - pure reorganization
- ✅ Same configuration options
- ✅ Same AI model support

## 🎯 Benefits of Modular Structure

1. **Easy Maintenance**: Find and fix issues quickly
2. **Simple Testing**: Test individual components
3. **Code Reuse**: Use AI engine in other projects
4. **Clear Separation**: Each module has a single purpose
5. **Better Organization**: Logical file structure

## 📈 Performance

- **Startup**: ~30 seconds (health check all models)
- **Reliability**: Never fails if ANY model works
- **Speed**: Automatic model selection for optimal performance
- **Monitoring**: Real-time health status and analytics

## 🆘 Troubleshooting

### Import Issues
```bash
# Test imports
python -c "from anime_bot import main; print('Imports work!')"
```

### Configuration Issues
- Check `config.py` for API keys
- Verify all required keys are set
- Test individual modules

### AI Model Issues
- Check OpenRouter API key
- Verify internet connection
- Review health status output

## 📝 Original Files

The original monolithic files are preserved:
- `Integrated Anime Bot with Multi-AI.py` (541 lines)
- `Multi-AI Engine with Cascading Fallback.py` (620 lines)
- `OpenRouter Setup & Usage Guide.md`

The modular version provides the same functionality with better organization and maintainability.
=======
# Anime-news

